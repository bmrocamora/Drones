# **Project 3: Cascade Control for Quadrotor in C++**
___
## **Task 1:** Provide a Writeup / README that includes all the rubric points and how you addressed each one.  You can submit your writeup as markdown or pdf.  
You're reading it! Below I describe how I addressed each rubric point and where in my code each point is handled.
This file contains four sections:
1. Task 1: Provide a Writeup / README (done).
2. Task 2: Rebuilding Controler into C++ and Tuning (done).
3. Task 3: Extra challenges (partially done).
___
## **Task 2:** Rebuilding Python Controller into C++

### **2.1:** Implement body rate control.

#### Function `GenerateMotorCommands()`

To generate commands for each motor, we need to solve the following linear system (of form A*x = b):

Solve:
[1  1  1  1][F1]   [ Fc ]
[1 -1 -1  1][F2] = [Mx/l]
[1  1 -1 -1][F3]   [My/l]
[1 -1  1 -1][F4]   [Mz/K]

where K = k_m/k_f (drag-to-lift ratio) and l = L/sqrt(2) (the motors are at this distance if you choose moments of inertia at 45 degrees from the drone's arms. Fc is the summation of thrusts, and Mx, My and Mz are the moments generated by the propellers.
The solution is x = inv(A) * b and is implemented directly in the following code lines.

```
VehicleCommand QuadControl::GenerateMotorCommands(float collThrustCmd, V3F momentCmd)
{
  float Fc = collThrustCmd; // [N]
  float Mx = momentCmd.x; // [Nm]
  float My = momentCmd.y; // [Nm]
  float Mz = momentCmd.z; // [Nm]


  float l = L / sqrt(2); // [m], 45deg angle

  float f1 = (Fc + Mx/l + My/l + Mz/(-kappa)) / 4; // [N]
  float f2 = (Fc - Mx/l + My/l - Mz/(-kappa)) / 4; // [N]
  float f3 = (Fc - Mx/l - My/l + Mz/(-kappa)) / 4; // [N]
  float f4 = (Fc + Mx/l - My/l - Mz/(-kappa)) / 4; // [N]

  cmd.desiredThrustsN[0] = f1; // front left
  cmd.desiredThrustsN[1] = f2; // front right
  cmd.desiredThrustsN[2] = f4; // rear left << REALLY WEIRD
  cmd.desiredThrustsN[3] = f3; // rear right << REALLY WEIRD

  return cmd;
